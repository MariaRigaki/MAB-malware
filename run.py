from bandit import *
import threading

if __name__ == '__main__':
    if len(sys.argv) < 1:
        print('Usage: run.py')
        exit()

    logger_rew.info('============= Start ============')
    logger_seq.info('============= Start ============')
    logger_mic.info('============= Start ============')

    bandit = Bandit()
    samples_manager = SamplesManager(Utils.get_malware_folder(), bandit)

    rewriter = Rewriter(bandit, samples_manager)
    minimizer = Minimizer(samples_manager, rewriter)

    rewriter.create_folders()

    rewriter_thread = threading.Thread(target=rewriter.run)
    minimizer_thread = threading.Thread(target=minimizer.run)

    rewriter_thread.start()
    minimizer_thread.start()

    rewriter_thread.join()
    minimizer_thread.join()

    print("Done!")
